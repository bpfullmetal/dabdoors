!function(e){"use strict";e.fn.hybridextendWidgetIconPicker=function(){return this.each(function(){var i=e(this),t=i.siblings(".hybridext-icon-picker-box"),d=i.siblings(".hybridext-icon-picked"),r=d.children("i"),n=t.find("i");d.on("click",function(){t.toggle()}),n.on("click",function(){var d=e(this).data("value");n.removeClass("selected");var o=e(this).hasClass("cmb-icon-none")?"":"selected";e(this).addClass(o),r.removeClass().addClass(o+" "+d),i.val(d),i.trigger("change"),t.toggle()})})},e(document).on("click",function(i){e(i.target).closest(".hybridext-icon-picker-box").length||e(i.target).closest(".hybridext-icon-picked").length||e(".hybridext-icon-picker-box").hide()}),e.fn.hybridextendWidgetImageUpload=function(){return this.each(function(){if("undefined"!=typeof wp&&wp.media&&wp.media.editor){var i=e(this),t=i.siblings(".hybridext-image"),d=i.children(".hybridext-image-selected-img"),r=i.siblings(".hybridext-image-remove");r.on("click",function(e){e.preventDefault(),t.val(""),t.trigger("change"),d.css("background-image","none")}),i.on("click",function(e){var r=i.data("frame");return r?(r.open(),!1):(r=wp.media({title:i.data("title"),library:{type:i.data("library").split(",").map(function(e){return e.trim()})},button:{text:i.data("update"),close:!1}}),i.data("frame",r),r.on("select",function(){var e=r.state().get("selection").first().attributes;t.val(e.id),t.trigger("change");var i="";i="undefined"!=typeof e.sizes?"undefined"!=typeof e.sizes.thumbnail?e.sizes.thumbnail.url:e.sizes.full.url:e.icon,d.css("background-image","url("+i+")"),r.close()}),r.open(),!1)})}})},e.fn.hybridextendWidgetCollapser=function(){return this.each(function(){var i=e(this),t=i.siblings(".hybridext-collapse-body");i.on("click",function(){t.toggle()})})},e.fn.hybridextSetupWidget=function(){var i=function(i,r,n){i.find(".hybridext-widget-field-group-add").each(function(){var i=e(this),n=i.siblings(".hybridext-widget-field-group-items"),o=i.parent(".hybridext-widget-field-group").data("id"),a=e("#hybridext-groupdata-"+r).data("groupwgtnumber"),s=e("#hybridext-groupdata-"+r).data("grouphtml"),l="undefined"!=typeof s?e(s)[0][o]:"";i.on("click",function(){var r=parseInt(e(this).data("iterator")),o=e(this).data("widgetnumber"),s=parseInt(e(this).data("limit"));if(s){var g=e(this).data("limitmsg"),c=e(this).siblings(".hybridext-widget-field-group-items").children().length;if(c+1>=s&&e(this).addClass("maxreached"),c>=s)return g&&alert(g),!1}r++,e(this).data("iterator",r);var h=l.trim().replace(/975318642/g,r).replace(new RegExp(a,"g"),o),f=e(h);t(f),d(f),f.find(".hybridext-icon").hybridextendWidgetIconPicker(),f.find(".hybridext-image-selected").hybridextendWidgetImageUpload(),f.find(".hybridext-color").wpColorPicker(),n.append(f),n.hasClass("issortable")&&n.sortable("refresh"),i.closest(".hybridext-widget-form").find("input").filter(":first").trigger("change")})}),i.find(".hybridext-widget-field-group-top").click(function(){e(this).toggleClass("open"),e(this).is(".open")?e(this).siblings(".hybridext-widget-field-group-items").find(".hybridext-widget-field-group-item-form").show():e(this).siblings(".hybridext-widget-field-group-items").find(".hybridext-widget-field-group-item-form").hide()})},t=function(i){i.find(".hybridext-widget-field-group-item-top").on("click",function(){e(this).siblings(".hybridext-widget-field-group-item-form").toggle()})},d=function(i){i.find(".hybridext-widget-field-group-remove").on("click",function(){e(this).closest(".hybridext-widget-form").find("input").filter(":first").trigger("change"),e(this).closest(".hybridext-widget-field-group-items").siblings(".hybridext-widget-field-group-add").removeClass("maxreached"),e(this).closest(".hybridext-widget-field-group-item").remove()})};return this.each(function(r,n){var o=e(n),a=o.data("class"),s=o.find(".hybridext-widget-field-group-items");if(o.data("hybridextend-form-setup")===!0)return!0;var l=o.closest(".widget");return l.length>0&&void 0!==l.attr("id")&&l.attr("id").indexOf("__i__")>-1?!0:(o.find(".hybridext-icon").hybridextendWidgetIconPicker(),o.find(".hybridext-image-selected").hybridextendWidgetImageUpload(),o.find(".hybridext-color").wpColorPicker(),o.find(".hybridext-collapse-head").hybridextendWidgetCollapser(),s.hasClass("issortable")&&s.sortable({handle:".fa-arrows-alt",placeholder:"hybridext-widget-field-sortlistitem-placeholder",forcePlaceholderSize:!0}),i(o,a,!1),t(o),d(o),o.find(".hybridext-widget-field-widgetid .widgetid").each(function(){var i=o.closest(".widget").attr("id"),t=e(this).data("baseid");t&&i&&(i=i.substring(i.indexOf(t)),e(this).html(" #"+i))}),void o.trigger("hybridextendwidgetformsetup").data("hybridextend-form-setup",!0))})},e("body.widgets-php:not(.block-editor-page) .hybridext-widget-form").hybridextSetupWidget(),e(document).on("widget-added widget-updated",function(e,i){i.find(".hybridext-widget-form").hybridextSetupWidget()})}(jQuery);